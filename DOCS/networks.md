## `networks`

<span>__networks__</span> contains specific functions for network
generation and analysis in different musical spaces.  

`Networks of pitch class sets`

<span>__def pcsDictionary__(Nc,order=0,TET=12,row=False,a=None)</span>  
Generate the dictionary of all possible pcs of a given cardinality in a
generalized musical space of TET pitches. Returns the dictionary as
pandas DataFrame and the list of all Z-related pcs

<span><span>Nc (int)</span> </span>
cardinality

<span><span>order (logical)</span> </span>
if 0 returns pcs in prime form, if 1 retrns pcs in normal order, if 2,
returns pcs in normal 0 order

<span><span>row (logical)</span> </span>
if True build dictionary from tone row, if False, build dictionary from
all combinatorial pcs of Nc cardinality given the totality of TET.

<span><span>a (int)</span> </span>
if row = True, a is the list of pitches in the tone row

<span>*Returns*</span>

<span><span>dictionary (pandas dataframe object)</span> </span>
dictionary as dataframe (name, pitch class set, interval vector)

<span><span>ZrelT (list of strings)</span> </span>
pitch class sets that have a Z-relation

<span>__def pcsNetwork__(input\_csv, thup= 1.5, thdw=0.0,TET=12, distance=  
’euclidean’, col=2,prob=1)</span>  
generate the network of pcs based on distances between interval
vectors  
In output it writes the nodes.csv and edges.csv as separate files in csv
format

<span><span>input\_csv (str)</span> </span>
file containing the dictionary generated by pcsNetwork

<span><span>thup, thdw (float)</span> </span>
upper and lower thresholds for edge creation

<span><span>distance (str)</span> </span>
choice of norm in the musical space, default is ’euclidean’

<span><span>col (int)</span> </span>
metric based on interval vector, col = 1 can be used for voice leading
networks in spaces of fixed cardinality (OBSOLETE)

<span><span>prob (float)</span> </span>
if not 1, defines the probability of acceptance of any given edge

<span>*Returns*</span>

<span><span>nodes, edges (pandas dataframe objects)</span> </span>
dataframe of nodes and edges of the network

<span>__def pcsEgoNetwork__(label, input\_csv, thup\_e=5.0, thdw\_e=0.1,
thup= 1.5, thdw=0.1, TET=12, distance=’euclidean’)</span>  
Generates the network for a focal node (ego) and the nodes to whom ego
is directly connected to (alters). In output it writes the
nodes\_ego.csv, edges\_ego.csv and edges\_alters.csv as separate files
in csv format

<span><span>label (str)</span> </span>
label of the ego node

<span><span>thup\_e, thdw\_e (float)</span> </span>
upper and lower thresholds for edge creation from ego node

<span><span>thup, thdw (float)</span> </span>
upper and lower thresholds for edge creation among alters

<span><span>distance (str)</span> </span>
choice of norm in the musical space, default is ’euclidean’

<span>*Returns*</span>

<span><span>nodes(ego), edges(ego), edges(alters) (pandas dataframe
objects)</span> </span>
dataframes of nodes and edges of the ego network

<span>__def vLeadNetwork__(input\_csv,thup=1.5,thdw=0.1,TET=12,w=True,  
distance=’euclidean’,prob=1)</span>  
Generation of the network of all minimal voice leadings in a generalized
musical space of TET pitches - based on the minimal distance operators -
select by distance. In output returns nodes and edges tables as pandas
DataFrames.

<span><span>input\_csv (str)</span> </span>
file containing the dictionary generated by pcsNetwork

<span><span>thup, thdw (float)</span> </span>
upper and lower thresholds for edge creation

<span><span>distance (str)</span> </span>
choice of norm in the musical space, default is ’euclidean’

<span><span>w (logical)</span> </span>
if True it writes the nodes.csv and edges.csv files in csv format

<span>*Returns*</span>

<span><span>nodes, edges (pandas dataframe objects)</span> </span>
dataframe of nodes and edges of the network

<span>__def vLeadNetworkByName__(input\_csv, thup=1.5, thdw=0.1, TET=12,
w=True, distance= ’euclidean’, prob=1)</span>  
Generation of the network of all minimal voice leadings in a generalized
musical space of TET pitches - based on the minimal distance operators -
select by name. In output returns nodes and edges tables as pandas
DataFrames. Available also in vector form for computational efficiency
as <span>vLeadNetworkByNameVec</span>

<span><span>input\_csv (str)</span> </span>
file containing the dictionary generated by pcsNetwork

<span><span>name (str)</span> </span>
name of operator for edge creation

<span><span>distance (str)</span> </span>
choice of norm in the musical space, default is ’euclidean’

<span><span>w (logical)</span> </span>
if True it writes the nodes.csv and edges.csv files in csv format

<span>*Returns*</span>

<span><span>nodes, edges (pandas dataframe objects)</span> </span>
dataframe of nodes and edges of the network

Score networks

<span>__def scoreNetwork__(seq, ntx, general, distance, TET)</span>  
Generates the directional network of chord progressions from any score
in musicxml format, See Figure [\[LvBscore\]](#LvBscore) for an
illustration.

<span><span>seq (int)</span> </span>
list of pcs for each chords extracted from the score

<span><span>ntx (logical)</span> </span>
if <span>True</span> produces the network (directed and undirected) as a
<span>networkx</span> graph object

<span><span>general (logical)</span> </span>
if <span>True</span> classifies the chord progressions with the
voice-leading operators, else with the distance operators

<span><span>distance (string)</span> </span>
defines the metric using the definitions in <span>sklearn</span>.

<span>*Returns*</span>

<span><span>nodes, edges (pandas dataframe objects)</span> </span>
dataframe of nodes and edges of the network

<span><span>counts (list of integers)</span> </span>
number of occurrences for each chord (histogram)

<span><span>avgdeg, modul (floats)</span> </span>
if <span>ntx = True</span>: average degree and modularity

<span><span>Gx, Gxu (networkx graph objects)</span> </span>
if <span>ntx = True</span>: directed and undirected graph as
<span>networkx</span> objects

<span>__def scoreSubNetwork__(seq, start, end, ntx, general, distance,
TET)</span>  
Generates the directional sub- network of chord progressions from a
range of pcs in the sequence defined by <span>start</span> and
<span>stop</span> (int). All other variables as above. It returns the
sub-network in the same format as above..

<span>__def scoreDictionary__(seq, TET=12)</span>  
Builds the dictionary of pcs in any score in musicxml format

<span><span>seq (list of lists)</span> </span>
list of the pitch class set sequence (from <span>readScore</span>)

<span>*Returns*</span>

<span><span>dictionary (pandas dataframe object)</span> </span>
dictionary as dataframe (name, pitch class set, interval vector)

<span>__def readScore__(inputxml,TET=12,music21=False)</span>  
Reads musicxml score and returns chord sequence

<span><span>inputxml (str)</span> </span>
score file

<span><span>music21 (logical)</span> </span>
if True search the music21 corpus

<span>*Returns*</span>

<span><span>seq (list of lists)</span> </span>
list of the pitch class set sequence

<span><span>chords (music21 chord object)</span> </span>
list of the chord sequence as extracted by <span>music21</span>


`Rhythm networks`

<span>__def rhythmDictionary__(Nc,a=None,REF=’e’)</span>  
Generates the dictionary of all possible rhythmic sequences of Nc length
in a generalized meter space of N durations. Returns the dictionary as
pandas DataFrame and indicates all non retrogradable and Z-related cells

<span><span>Nc (int)</span> </span>
cell length

<span><span>a (str)</span> </span>
list of durations in the rhythm sequence

<span>*Returns*</span>

<span><span>dictionary (pandas dataframe object)</span> </span>
dictionary as dataframe (name, rhythm sequence, duration vector)

<span><span>ZrelT (list of strings)</span> </span>
rhythm sequences that have a Z-relation

<span>__def rhythmPDictionary__(N,Nc,REF=’e’)</span>  
Generate the dictionary of all possible rhythmic sequences from all
possible groupings of N REF durations. Returns the dictionary as pandas
DataFrame and indicates all non retrogradable and Z-related cells

<span><span>Nc (int)</span> </span>
cell length

<span><span>N (int)</span> </span>
number of REF units

<span>*Returns*</span>  
As above.

<span>__def rhythmNetwork__(input\_csv, thup=1.5, thdw=0.0, distance=
’euclidean’, prob=1, w=False)</span>  
Generates the network of rhythmic cells based on distances between
duration vectors. In output it writes the nodes.csv and edges.csv as
separate files in csv format

<span><span>input\_csv (str)</span> </span>
file containing the dictionary generated by rhythmNetwork

<span><span>thup, thdw (float)</span> </span>
upper and lower thresholds for edge creation

<span><span>distance (str)</span> </span>
choice of norm in the musical space, default is ’euclidean’

<span><span>prob (float)</span> </span>
if not 1, defines the probability of acceptance of any given edge

<span><span>w (logical)</span> </span>
if True it writes the nodes.csv and edges.csv files in csv format

<span>*Returns*</span>

<span><span>nodes, edges (pandas dataframe objects)</span> </span>
dataframe of nodes and edges of the network

<span>__def rLeadNetwork__(input\_csv, thup=1.5, thdw=0.1, w=True, distance=
’euclidean’, prob=1)</span>  
Generation of the network of all minimal rhythm leadings in a
generalized musical space of N\(_C\)-dim rhythmic cells based on the
rhythm distance operator. Returns nodes and edges tables as pandas
DataFrames

<span><span>input\_csv (str)</span> </span>
file containing the dictionary generated by rhythmNetwork

<span><span>thup, thdw (float)</span> </span>
upper and lower thresholds for edge creation

<span><span>distance (str)</span> </span>
choice of norm in the musical space, default is ’euclidean’

<span><span>prob (float)</span> </span>
if not 1, defines the probability of acceptance of any given edge

<span><span>w (logical)</span> </span>
if True it writes the nodes.csv and edges.csv files in csv format

<span>*Returns*</span>  
As above.

`Orchestration networks`

<span>__def orchestralVector__(inputfile,barplot=True)</span>  
Builds the orchestral vector sequence from score in
<span>musicxml</span> format. Returns the score sliced by beat;
orchestration vector.

<span><span>barplot=True</span> </span>
plot the orchestral vector sequence as a matrix

<span>*Returns*</span>

<span><span>score (music21 object)</span> </span>
score sliced by beat

<span><span>orch (list of lists)</span> </span>
orchestral vectors for every beat (in binary format: 1 if instrument is
playin, 0 if not)

<span><span>num (list)</span> </span>
beat vector identifier (integer corresponding to the binary number
encoded in the orchestral vector)

<span>__def orchestralNetwork__(seq)</span>  
Generates the directional network of orchestration vectors from any
score in musicxml format. Use <span>orchestralVector</span> to import
the score data as sequence. Returns nodes and edges as Pandas
DataFrames; average degree, modularity and partitioning of the network.

<span><span>seq (int)</span> </span>
list of orchestration vectors extracted from the score

<span>*Returns*</span>  
As <span>scoreNetwork</span>.

<span>__def orchestralVectorColor__(orch, dnodes, part,
color=plt.cm.binary)</span>  
Plots the sequence of the orchestration vectors color-coded according to
the modularity class they belong. Requires the output of
orchestralNetwork(). See Figure [\[BachOrch\]](#BachOrch)

<span><span>orch (int)</span> </span>
list of orchestration vectors extracted from the score

<span><span>dnodes (pandas dataframe object)</span> </span>
dataframe of nodes of the network (for labelling)

<span><span>part (list of int)</span> </span>
list of partitions for orchestration vectors

`Timbral networks`

<span>__def timbralNetwork__(waves,vector,thup=10,thdw=0.1)</span>  
generates the network of MFCC vectors from sound recordings. Returns the
nodes and edges tables as pandas DataFrames

<span><span>seq (float)</span> </span>
list of MFCC vectors

<span><span>waves (str)</span> </span>
names of sound files

<span>*Returns*</span>

<span><span>nodes, edges (pandas dataframe objects)</span> </span>
dataframe of nodes and edges of the network
